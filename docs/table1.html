<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Just Enough R</title>
  <meta name="description" content="Just Enough R">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Just Enough R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Just Enough R" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="code-reuse.html">
<link rel="next" href="quirks.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="https://hypothes.is/embed.js" async></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Just enough R</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="part"><span><b>I Getting started</b></span></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>1</b> Working with R</a><ul>
<li class="chapter" data-level="" data-path="installation-intro.html"><a href="installation-intro.html"><i class="fa fa-check"></i>Installation</a><ul>
<li class="chapter" data-level="" data-path="installation-intro.html"><a href="installation-intro.html#start-here"><i class="fa fa-check"></i>Workflow</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i>RMarkdown</a></li>
<li class="chapter" data-level="" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i>RStudio</a></li>
<li class="chapter" data-level="" data-path="first-commands.html"><a href="first-commands.html"><i class="fa fa-check"></i>First commands</a></li>
<li class="chapter" data-level="" data-path="variables.html"><a href="variables.html"><i class="fa fa-check"></i>Naming things</a></li>
<li class="chapter" data-level="" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html"><i class="fa fa-check"></i>Vectors and lists</a><ul>
<li class="chapter" data-level="" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html#vector"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html#access-vector-elements"><i class="fa fa-check"></i>Accessing elements</a></li>
<li class="chapter" data-level="" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html#selecting-more-than-one-element"><i class="fa fa-check"></i>Selecting more than one element</a></li>
<li class="chapter" data-level="" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html#making-sequences"><i class="fa fa-check"></i>Making and slicing with sequences</a></li>
<li class="chapter" data-level="" data-path="vectors-and-lists.html"><a href="vectors-and-lists.html#conditional-slices"><i class="fa fa-check"></i>Conditional slicing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="processing-vectors.html"><a href="processing-vectors.html"><i class="fa fa-check"></i>Processing vectors</a><ul>
<li class="chapter" data-level="" data-path="processing-vectors.html"><a href="processing-vectors.html#making-new-vectors"><i class="fa fa-check"></i>Making new vectors</a></li>
<li class="chapter" data-level="" data-path="processing-vectors.html"><a href="processing-vectors.html#making-up-data-new-vectors"><i class="fa fa-check"></i>Making up data (new vectors)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="functions-to-learn-now.html"><a href="functions-to-learn-now.html"><i class="fa fa-check"></i>Functions to learn now</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="2" data-path="datasets-dataframes.html"><a href="datasets-dataframes.html"><i class="fa fa-check"></i><b>2</b> Datasets and dataframes</a><ul>
<li class="chapter" data-level="" data-path="looking-at-data.html"><a href="looking-at-data.html"><i class="fa fa-check"></i>Looking at data</a><ul>
<li class="chapter" data-level="" data-path="looking-at-data.html"><a href="looking-at-data.html#using-individual-columns"><i class="fa fa-check"></i>Using individual columns</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="working-with-dataframes.html"><a href="working-with-dataframes.html"><i class="fa fa-check"></i>Working with dataframes</a><ul>
<li><a href="working-with-dataframes.html#tidyverse">Introducing the <code>tidyverse</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="selecting-columns.html"><a href="selecting-columns.html"><i class="fa fa-check"></i>Selecting columns</a></li>
<li class="chapter" data-level="" data-path="selecting-rows.html"><a href="selecting-rows.html"><i class="fa fa-check"></i>Selecting rows</a></li>
<li class="chapter" data-level="" data-path="operators.html"><a href="operators.html"><i class="fa fa-check"></i>‘Operators’</a></li>
<li class="chapter" data-level="" data-path="sorting.html"><a href="sorting.html"><i class="fa fa-check"></i>Sorting</a></li>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i>Pipes</a></li>
<li class="chapter" data-level="" data-path="mutate.html"><a href="mutate.html"><i class="fa fa-check"></i>Modifying and creating new columns</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="real-data.html"><a href="real-data.html"><i class="fa fa-check"></i><b>3</b> ‘Real’ data</a><ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i>Importing data</a><ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#importing-data-from-the-web"><i class="fa fa-check"></i>Importing data over the web</a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#importing-proprietary-formats"><i class="fa fa-check"></i>Importing from SPSS and other packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="saving-and-exporting.html"><a href="saving-and-exporting.html"><i class="fa fa-check"></i>Saving and exporting</a><ul>
<li class="chapter" data-level="" data-path="saving-and-exporting.html"><a href="saving-and-exporting.html#use-csv"><i class="fa fa-check"></i>Use CSV files</a></li>
<li class="chapter" data-level="" data-path="saving-and-exporting.html"><a href="saving-and-exporting.html#archiving-publication-and-sharing"><i class="fa fa-check"></i>Archiving, publication and sharing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="multiple-raw-data-files.html"><a href="multiple-raw-data-files.html"><i class="fa fa-check"></i>Dealing with multiple files</a></li>
<li class="chapter" data-level="" data-path="joining-data.html"><a href="joining-data.html"><i class="fa fa-check"></i>Joining different datasets</a></li>
<li class="chapter" data-level="" data-path="factors-and-numerics.html"><a href="factors-and-numerics.html"><i class="fa fa-check"></i>Types of variable</a><ul>
<li><a href="factors-and-numerics.html#diffsinquantity">Differences in <em>quantity</em>: numeric variables</a></li>
<li><a href="factors-and-numerics.html#character-and-factor">Differences in <em>quality or kind</em></a></li>
<li class="chapter" data-level="" data-path="factors-and-numerics.html"><a href="factors-and-numerics.html#facsforcategs"><i class="fa fa-check"></i>Factors for categorical data</a></li>
<li class="chapter" data-level="" data-path="factors-and-numerics.html"><a href="factors-and-numerics.html#storingdates"><i class="fa fa-check"></i>Dates</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="missingvalues.html"><a href="missingvalues.html"><i class="fa fa-check"></i>Missing values</a></li>
<li class="chapter" data-level="" data-path="tidyingdata.html"><a href="tidyingdata.html"><i class="fa fa-check"></i>Tidying data</a></li>
<li class="chapter" data-level="" data-path="reshaping.html"><a href="reshaping.html"><i class="fa fa-check"></i>Reshaping</a><ul>
<li class="chapter" data-level="" data-path="reshaping.html"><a href="reshaping.html#which-reshape-package"><i class="fa fa-check"></i>Which package should you use to reshape data?</a></li>
<li class="chapter" data-level="" data-path="reshaping.html"><a href="reshaping.html#aggregating-and-reshaping-at-the-same-time"><i class="fa fa-check"></i>Aggregating and reshaping at the same time</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="summarising-data.html"><a href="summarising-data.html"><i class="fa fa-check"></i><b>4</b> Summaries</a><ul>
<li class="chapter" data-level="" data-path="quick-and-dirty.html"><a href="quick-and-dirty.html"><i class="fa fa-check"></i>“Quick and dirty”</a><ul>
<li class="chapter" data-level="" data-path="quick-and-dirty.html"><a href="quick-and-dirty.html#frequency-tables"><i class="fa fa-check"></i>Frequency tables</a></li>
<li class="chapter" data-level="" data-path="quick-and-dirty.html"><a href="quick-and-dirty.html#summary-statistics"><i class="fa fa-check"></i>Summary statistics</a></li>
<li class="chapter" data-level="" data-path="quick-and-dirty.html"><a href="quick-and-dirty.html#creating-a-data-frame-of-summary-statistics"><i class="fa fa-check"></i>Creating a data frame of summary statistics</a></li>
<li class="chapter" data-level="" data-path="quick-and-dirty.html"><a href="quick-and-dirty.html#computing-statistics-by-groups"><i class="fa fa-check"></i>Computing statistics by-groups</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="a-generalised-approach.html"><a href="a-generalised-approach.html"><i class="fa fa-check"></i>A generalised approach</a><ul>
<li class="chapter" data-level="" data-path="a-generalised-approach.html"><a href="a-generalised-approach.html#fancy-reshaping"><i class="fa fa-check"></i>Fancy reshaping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>5</b> Graphics</a><ul>
<li class="chapter" data-level="" data-path="graphics-benefits.html"><a href="graphics-benefits.html"><i class="fa fa-check"></i>Benefits of visualising data</a></li>
<li class="chapter" data-level="" data-path="graphics-approaches.html"><a href="graphics-approaches.html"><i class="fa fa-check"></i>Which tool to use?</a></li>
<li><a href="layered-graphics.html#layered-graphics">Layered graphics with <code>ggplot</code></a><ul>
<li class="chapter" data-level="" data-path="layered-graphics.html"><a href="layered-graphics.html"><i class="fa fa-check"></i>A thought on ‘chart chooser’ guides</a></li>
<li><a href="layered-graphics.html#thinking-like-ggplot">Thinking like <code>ggplot</code></a></li>
<li class="chapter" data-level="" data-path="layered-graphics.html"><a href="layered-graphics.html#relationships"><i class="fa fa-check"></i>‘Relationships’</a></li>
<li class="chapter" data-level="" data-path="layered-graphics.html"><a href="layered-graphics.html#distributions"><i class="fa fa-check"></i>‘Distributions’</a></li>
<li class="chapter" data-level="" data-path="layered-graphics.html"><a href="layered-graphics.html#comparisons"><i class="fa fa-check"></i>‘Comparisons’</a></li>
<li class="chapter" data-level="" data-path="layered-graphics.html"><a href="layered-graphics.html#composition"><i class="fa fa-check"></i>‘Composition’</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="utility-plotting-functions.html"><a href="utility-plotting-functions.html"><i class="fa fa-check"></i>‘Quick and dirty’ (utility) plots</a><ul>
<li class="chapter" data-level="5.0.1" data-path="utility-plotting-functions.html"><a href="utility-plotting-functions.html#distributions-1"><i class="fa fa-check"></i><b>5.0.1</b> Distributions</a></li>
<li class="chapter" data-level="5.0.2" data-path="utility-plotting-functions.html"><a href="utility-plotting-functions.html#relationships-1"><i class="fa fa-check"></i><b>5.0.2</b> Relationships</a></li>
<li class="chapter" data-level="5.0.3" data-path="utility-plotting-functions.html"><a href="utility-plotting-functions.html#quantities"><i class="fa fa-check"></i><b>5.0.3</b> Quantities</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot-details.html"><a href="ggplot-details.html"><i class="fa fa-check"></i>Tricks with ggplot</a><ul>
<li class="chapter" data-level="" data-path="ggplot-details.html"><a href="ggplot-details.html#facetting-plots"><i class="fa fa-check"></i>More ways to facet a plot</a></li>
<li><a href="ggplot-details.html#facet_wrap"><code>facet_wrap</code></a></li>
<li><a href="ggplot-details.html#facet_grid"><code>facet_grid</code></a></li>
<li class="chapter" data-level="" data-path="ggplot-details.html"><a href="ggplot-details.html#combining-plots"><i class="fa fa-check"></i>Combining separate plots in a grid</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exporting-graphics.html"><a href="exporting-graphics.html"><i class="fa fa-check"></i>Exporting for print</a></li>
</ul></li>
<li class="part"><span><b>III Models</b></span></li>
<li class="chapter" data-level="6" data-path="common-inferential-stats.html"><a href="common-inferential-stats.html"><i class="fa fa-check"></i><b>6</b> Common inferential statistics</a><ul>
<li><a href="crosstabs.html#crosstabs">Crosstabulations and <span class="math inline">\(\chi^2\)</span></a><ul>
<li class="chapter" data-level="" data-path="crosstabs.html"><a href="crosstabs.html"><i class="fa fa-check"></i>Three-way tables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="correlations.html"><a href="correlations.html"><i class="fa fa-check"></i>Correlations</a><ul>
<li class="chapter" data-level="" data-path="correlations.html"><a href="correlations.html#correlation-matrix"><i class="fa fa-check"></i>Creating a correlation matrix</a></li>
<li class="chapter" data-level="" data-path="correlations.html"><a href="correlations.html#working-with-correlation-matrices"><i class="fa fa-check"></i>Working with correlation matrices</a></li>
<li class="chapter" data-level="" data-path="correlations.html"><a href="correlations.html#correlation-tables-for-publication"><i class="fa fa-check"></i>Tables for publication</a></li>
<li class="chapter" data-level="" data-path="correlations.html"><a href="correlations.html#correlation-methods"><i class="fa fa-check"></i>Other methods for correlation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="t-tests.html"><a href="t-tests.html"><i class="fa fa-check"></i>t-tests</a><ul>
<li class="chapter" data-level="" data-path="t-tests.html"><a href="t-tests.html#visualising-your-data-first"><i class="fa fa-check"></i>Visualising your data first</a></li>
<li class="chapter" data-level="" data-path="t-tests.html"><a href="t-tests.html#running-a-t-test"><i class="fa fa-check"></i>Running a t-test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="linear-models-simple.html"><a href="linear-models-simple.html"><i class="fa fa-check"></i><b>7</b> Regression</a><ul>
<li class="chapter" data-level="" data-path="linear-models-simple.html"><a href="linear-models-simple.html#formulae"><i class="fa fa-check"></i>Describing statistical models using formulae</a></li>
<li class="chapter" data-level="" data-path="linear-models-simple.html"><a href="linear-models-simple.html#running-a-linear-model"><i class="fa fa-check"></i>Running a linear model</a></li>
<li class="chapter" data-level="" data-path="linear-models-simple.html"><a href="linear-models-simple.html#more-on-formulas"><i class="fa fa-check"></i>More on formulas</a></li>
<li class="chapter" data-level="" data-path="factors-and-variable-codings.html"><a href="factors-and-variable-codings.html"><i class="fa fa-check"></i>Factors and variable codings</a></li>
<li class="chapter" data-level="" data-path="parameterisation.html"><a href="parameterisation.html"><i class="fa fa-check"></i>Model specification</a><ul>
<li class="chapter" data-level="" data-path="parameterisation.html"><a href="parameterisation.html#regression-coding"><i class="fa fa-check"></i>Effect/dummy coding and contrasts</a></li>
<li class="chapter" data-level="" data-path="parameterisation.html"><a href="parameterisation.html#centering"><i class="fa fa-check"></i>Centering (is often helpful)</a></li>
<li class="chapter" data-level="" data-path="parameterisation.html"><a href="parameterisation.html#scaling-regression-inputs"><i class="fa fa-check"></i>Scaling inputs</a></li>
<li class="chapter" data-level="" data-path="parameterisation.html"><a href="parameterisation.html#alternatives-to-rescaling"><i class="fa fa-check"></i>Alternatives to rescaling</a></li>
<li class="chapter" data-level="" data-path="parameterisation.html"><a href="parameterisation.html#what-next"><i class="fa fa-check"></i>What next</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>8</b> Anova</a><ul>
<li class="chapter" data-level="" data-path="anova.html"><a href="anova.html#rules-for-using-anova-in-r"><i class="fa fa-check"></i>Rules for using Anova in R</a></li>
<li class="chapter" data-level="" data-path="anova.html"><a href="anova.html#anova-recommendations"><i class="fa fa-check"></i>Recommendations for doing Anova</a></li>
<li class="chapter" data-level="" data-path="anova-cookbook.html"><a href="anova-cookbook.html"><i class="fa fa-check"></i>Anova ‘Cookbook’</a><ul>
<li class="chapter" data-level="" data-path="anova-cookbook.html"><a href="anova-cookbook.html#between-subjects-anova"><i class="fa fa-check"></i>Between-subjects Anova</a></li>
<li class="chapter" data-level="" data-path="anova-cookbook.html"><a href="anova-cookbook.html#repeated-measures"><i class="fa fa-check"></i>Repeated measures or ‘split plot’ designs</a></li>
<li class="chapter" data-level="" data-path="anova-cookbook.html"><a href="anova-cookbook.html#trad-rm-anova"><i class="fa fa-check"></i>Traditional repeated measures Anova</a></li>
<li class="chapter" data-level="" data-path="anova-cookbook.html"><a href="anova-cookbook.html#comparison-with-a-multilevel-model"><i class="fa fa-check"></i>Comparison with a multilevel model</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="checking-assumptions.html"><a href="checking-assumptions.html"><i class="fa fa-check"></i>Checking assumptions</a></li>
<li class="chapter" data-level="" data-path="followup-tests.html"><a href="followup-tests.html"><i class="fa fa-check"></i>Followup tests</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="general-linear-models.html"><a href="general-linear-models.html"><i class="fa fa-check"></i><b>9</b> General linear models</a><ul>
<li class="chapter" data-level="" data-path="general-linear-models.html"><a href="general-linear-models.html#logistic-regression"><i class="fa fa-check"></i>Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="multilevel-models.html"><a href="multilevel-models.html"><i class="fa fa-check"></i><b>10</b> Multilevel models</a><ul>
<li class="chapter" data-level="" data-path="fitting-models.html"><a href="fitting-models.html"><i class="fa fa-check"></i>Fitting multilevel models in R</a><ul>
<li><a href="fitting-models.html#use-lmer-and-glmer">Use <code>lmer</code> and <code>glmer</code></a></li>
<li><a href="fitting-models.html#p-values-in-multilevel-models"><em>p</em> values in multilevel models</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="extending-traditional-rm-anova.html"><a href="extending-traditional-rm-anova.html"><i class="fa fa-check"></i>Extending traditional RM Anova</a><ul>
<li><a href="extending-traditional-rm-anova.html#fit-a-simple-slope-for-days">Fit a simple slope for <code>Days</code></a></li>
<li class="chapter" data-level="" data-path="extending-traditional-rm-anova.html"><a href="extending-traditional-rm-anova.html#allow-the-effect-of-sleep-deprivation-to-vary-for-different-participants"><i class="fa fa-check"></i>Allow the effect of sleep deprivation to vary for different participants</a></li>
<li><a href="extending-traditional-rm-anova.html#growth-curve-sleep-example">Fitting a curve for the effect of <code>Days</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="icc-and-vpc.html"><a href="icc-and-vpc.html"><i class="fa fa-check"></i>Variance partition coefficients and intraclass correlations</a></li>
<li class="chapter" data-level="" data-path="threelevel.html"><a href="threelevel.html"><i class="fa fa-check"></i>3 level models with ‘partially crossed’ random effects</a></li>
<li><a href="contrasts-lmer.html#contrasts-lmer">Contrasts and followup tests using <code>lmer</code></a></li>
<li class="chapter" data-level="" data-path="troubleshooting-multilevel-models.html"><a href="troubleshooting-multilevel-models.html"><i class="fa fa-check"></i>Troubleshooting</a><ul>
<li class="chapter" data-level="" data-path="troubleshooting-multilevel-models.html"><a href="troubleshooting-multilevel-models.html#simplifying-mixed-models"><i class="fa fa-check"></i>Convergence problems and simplifying the random effects structure</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="multilevel-bayes-reasons.html"><a href="multilevel-bayes-reasons.html"><i class="fa fa-check"></i>Bayesian multilevel models</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mediation-and-covariance-modelling.html"><a href="mediation-and-covariance-modelling.html"><i class="fa fa-check"></i><b>11</b> Mediation and covariance modelling</a><ul>
<li class="chapter" data-level="" data-path="mediation.html"><a href="mediation.html"><i class="fa fa-check"></i>Mediation</a></li>
<li class="chapter" data-level="" data-path="covariance-modelling.html"><a href="covariance-modelling.html"><i class="fa fa-check"></i>Covariance modelling</a></li>
<li class="chapter" data-level="" data-path="path-models.html"><a href="path-models.html"><i class="fa fa-check"></i>Path models</a><ul>
<li class="chapter" data-level="" data-path="path-models.html"><a href="path-models.html#defining-a-model"><i class="fa fa-check"></i>Defining a model</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cfa.html"><a href="cfa.html"><i class="fa fa-check"></i>Confirmatory factor analysis (CFA)</a><ul>
<li class="chapter" data-level="" data-path="cfa.html"><a href="cfa.html#defining-the-model"><i class="fa fa-check"></i>Defining the model</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="model-fit.html"><a href="model-fit.html"><i class="fa fa-check"></i>Model fit</a></li>
<li class="chapter" data-level="" data-path="modification-indices.html"><a href="modification-indices.html"><i class="fa fa-check"></i>Modification indices</a></li>
<li class="chapter" data-level="" data-path="model-improvement.html"><a href="model-improvement.html"><i class="fa fa-check"></i>Model modification and improvement</a></li>
<li class="chapter" data-level="" data-path="sem.html"><a href="sem.html"><i class="fa fa-check"></i>Structural eqution modelling (SEM)</a></li>
<li class="chapter" data-level="" data-path="identification.html"><a href="identification.html"><i class="fa fa-check"></i>‘Identification’ in CFA and SEM</a></li>
<li class="chapter" data-level="" data-path="cfa-sem-missing-data.html"><a href="cfa-sem-missing-data.html"><i class="fa fa-check"></i>Missing data</a></li>
<li class="chapter" data-level="" data-path="gof.html"><a href="gof.html"><i class="fa fa-check"></i>Goodness of fit statistics in CFA</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="bayes-mcmc.html"><a href="bayes-mcmc.html"><i class="fa fa-check"></i><b>12</b> Baysian model fitting</a><ul>
<li class="chapter" data-level="" data-path="bayes-mcmc.html"><a href="bayes-mcmc.html#baysian-fitting-of-linear-models-via-mcmc-methods"><i class="fa fa-check"></i>Baysian fitting of linear models via MCMC methods</a></li>
<li class="chapter" data-level="" data-path="bayes-mcmc.html"><a href="bayes-mcmc.html#posterior-probabilities-for-parameters"><i class="fa fa-check"></i>Posterior probabilities for parameters</a></li>
<li class="chapter" data-level="" data-path="bayes-mcmc.html"><a href="bayes-mcmc.html#credible-intervals"><i class="fa fa-check"></i>Credible intervals</a></li>
<li class="chapter" data-level="" data-path="bayes-mcmc.html"><a href="bayes-mcmc.html#bayesian-p-values-for-parameters"><i class="fa fa-check"></i>Bayesian ‘p values’ for parameters</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="power-analysis.html"><a href="power-analysis.html"><i class="fa fa-check"></i><b>13</b> Power analysis</a><ul>
<li class="chapter" data-level="" data-path="power-analysis.html"><a href="power-analysis.html#for-most-inferential-statistics"><i class="fa fa-check"></i>For most inferential statistics</a></li>
<li class="chapter" data-level="" data-path="power-analysis.html"><a href="power-analysis.html#for-multilevel-or-generalised-linear-models"><i class="fa fa-check"></i>For multilevel or generalised linear models</a></li>
</ul></li>
<li class="part"><span><b>IV Patterns</b></span></li>
<li class="chapter" data-level="14" data-path="learning-key-patterns.html"><a href="learning-key-patterns.html"><i class="fa fa-check"></i><b>14</b> Learning key patterns</a></li>
<li class="chapter" data-level="15" data-path="understanding-interactions.html"><a href="understanding-interactions.html"><i class="fa fa-check"></i><b>15</b> Unpicking interactions</a><ul>
<li class="chapter" data-level="" data-path="understanding-interactions.html"><a href="understanding-interactions.html#what-is-an-interaction"><i class="fa fa-check"></i>What is an interaction?</a></li>
<li class="chapter" data-level="" data-path="understanding-interactions.html"><a href="understanding-interactions.html#visualising-interactions-from-raw-data"><i class="fa fa-check"></i>Visualising interactions from raw data</a></li>
<li class="chapter" data-level="" data-path="understanding-interactions.html"><a href="understanding-interactions.html#pain-music-data"><i class="fa fa-check"></i>A painful example</a></li>
<li class="chapter" data-level="" data-path="understanding-interactions.html"><a href="understanding-interactions.html#continuous-predictors"><i class="fa fa-check"></i>Continuous predictors</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="predictions-and-margins.html"><a href="predictions-and-margins.html"><i class="fa fa-check"></i><b>16</b> Making predictions</a><ul>
<li class="chapter" data-level="" data-path="predictions-and-margins.html"><a href="predictions-and-margins.html#predictions-vs-margins"><i class="fa fa-check"></i>Predictions vs margins</a></li>
<li class="chapter" data-level="" data-path="predictions-and-margins.html"><a href="predictions-and-margins.html#predicted-means"><i class="fa fa-check"></i>Predicted means</a></li>
<li><a href="predictions-and-margins.html#effects-margins"><em>Effects</em> (margins)</a></li>
<li class="chapter" data-level="" data-path="predictions-and-margins.html"><a href="predictions-and-margins.html#continuous-predictors-1"><i class="fa fa-check"></i>Continuous predictors</a></li>
<li><a href="predicted-means-and-margins-using-lm.html#predicted-means-and-margins-using-lm">Predicted means and margins using <code>lm()</code></a><ul>
<li class="chapter" data-level="" data-path="predicted-means-and-margins-using-lm.html"><a href="predicted-means-and-margins-using-lm.html"><i class="fa fa-check"></i>Running the model</a></li>
<li class="chapter" data-level="" data-path="predicted-means-and-margins-using-lm.html"><a href="predicted-means-and-margins-using-lm.html#making-predictions-for-means"><i class="fa fa-check"></i>Making predictions for means</a></li>
<li><a href="predicted-means-and-margins-using-lm.html#making-prdictions-for-margins-effects-of-predictors">Making prdictions for margins (<em>effects</em> of predictors)</a></li>
<li class="chapter" data-level="" data-path="predicted-means-and-margins-using-lm.html"><a href="predicted-means-and-margins-using-lm.html#marginal-effects"><i class="fa fa-check"></i>Marginal effects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="predictions-with-continuous-covariates.html"><a href="predictions-with-continuous-covariates.html"><i class="fa fa-check"></i>Predictions with continuous covariates</a></li>
<li class="chapter" data-level="" data-path="visualising-interactions.html"><a href="visualising-interactions.html"><i class="fa fa-check"></i>Visualising interactions</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="models-are-data-too.html"><a href="models-are-data-too.html"><i class="fa fa-check"></i><b>17</b> Models are data</a><ul>
<li class="chapter" data-level="" data-path="models-are-data-too.html"><a href="models-are-data-too.html#storing-models-in-variables"><i class="fa fa-check"></i>Storing models in variables</a></li>
<li class="chapter" data-level="" data-path="models-are-data-too.html"><a href="models-are-data-too.html#extract-results-from-models"><i class="fa fa-check"></i>Extracting results from models</a></li>
<li><a href="models-are-data-too.html#poking-around-with-and">‘Poking around’ with <code>$</code> and <code>@</code></a></li>
<li class="chapter" data-level="" data-path="models-are-data-too.html"><a href="models-are-data-too.html#broom"><i class="fa fa-check"></i>Save work: use a Broom</a></li>
<li class="chapter" data-level="" data-path="process-model-results.html"><a href="process-model-results.html"><i class="fa fa-check"></i>‘Processing’ results</a></li>
<li class="chapter" data-level="" data-path="output-tables.html"><a href="output-tables.html"><i class="fa fa-check"></i>Printing tables</a></li>
<li class="chapter" data-level="" data-path="apa-output.html"><a href="apa-output.html"><i class="fa fa-check"></i>APA formatting for free</a><ul>
<li><a href="apa-output.html#chi2">Chi<sup>2</sup></a></li>
<li class="chapter" data-level="" data-path="apa-output.html"><a href="apa-output.html#t-test"><i class="fa fa-check"></i>T-test</a></li>
<li class="chapter" data-level="" data-path="apa-output.html"><a href="apa-output.html#anova-1"><i class="fa fa-check"></i>Anova</a></li>
<li class="chapter" data-level="" data-path="multilevel-models.html"><a href="multilevel-models.html#multilevel-models"><i class="fa fa-check"></i>Multilevel models</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="code-reuse.html"><a href="code-reuse.html"><i class="fa fa-check"></i>Simplifying and re-using</a><ul>
<li class="chapter" data-level="" data-path="code-reuse.html"><a href="code-reuse.html#helper-functions"><i class="fa fa-check"></i>Writing helper functions</a></li>
<li><a href="code-reuse.html#ggplot-reuse">Re-using code with <code>ggplot</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="table1.html"><a href="table1.html"><i class="fa fa-check"></i>“Table 1”</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="quirks.html"><a href="quirks.html"><i class="fa fa-check"></i><b>18</b> Dealing with quirks of R</a><ul>
<li class="chapter" data-level="" data-path="rownames.html"><a href="rownames.html"><i class="fa fa-check"></i>Rownames are evil</a></li>
<li class="chapter" data-level="" data-path="string-handling.html"><a href="string-handling.html"><i class="fa fa-check"></i>Working with character strings</a><ul>
<li class="chapter" data-level="18.0.1" data-path="string-handling.html"><a href="string-handling.html#searching-and-replacing"><i class="fa fa-check"></i><b>18.0.1</b> Searching and replacing</a></li>
<li><a href="processing-vectors.html#paste">Using <code>paste</code> to make labels</a></li>
<li><a href="string-handling.html#separate-and-extract">Fixing up <code>variable</code> after melting</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="colours.html"><a href="colours.html"><i class="fa fa-check"></i>Colours</a><ul>
<li class="chapter" data-level="" data-path="colours.html"><a href="colours.html#picking-colours"><i class="fa fa-check"></i>Picking colours for plots</a></li>
<li class="chapter" data-level="" data-path="colours.html"><a href="colours.html#named-colours"><i class="fa fa-check"></i>Named colours in R</a></li>
<li class="chapter" data-level="" data-path="colours.html"><a href="colours.html#color-brewer"><i class="fa fa-check"></i>ColourBrewer with ggplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="getting-help.html"><a href="getting-help.html"><i class="fa fa-check"></i><b>19</b> Getting help</a><ul>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#backtick-location"><i class="fa fa-check"></i>Finding the backtick on your keyboard</a></li>
</ul></li>
<li class="part"><span><b>V Explanations</b></span></li>
<li class="chapter" data-level="20" data-path="intervals.html"><a href="intervals.html"><i class="fa fa-check"></i><b>20</b> Confidence and Intervals</a><ul>
<li class="chapter" data-level="" data-path="intervals.html"><a href="intervals.html#the-problem-with-confidence-intervals"><i class="fa fa-check"></i>The problem with confidence intervals</a></li>
<li class="chapter" data-level="" data-path="intervals.html"><a href="intervals.html#forgetting-that-the-ci-depends-on-sample-size."><i class="fa fa-check"></i>Forgetting that the CI depends on sample size.</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="multiple-comparisons.html"><a href="multiple-comparisons.html"><i class="fa fa-check"></i><b>21</b> Multiple comparisons</a><ul>
<li><a href="multiple-comparisons.html#p-values-and-false-discoveries"><em>p</em> values and ‘false discoveries’</a></li>
<li class="chapter" data-level="" data-path="multiple-comparisons.html"><a href="multiple-comparisons.html#multiple-tests-on-the-same-data"><i class="fa fa-check"></i>Multiple tests on the same data</a></li>
<li class="chapter" data-level="" data-path="multiple-comparisons.html"><a href="multiple-comparisons.html#what-to-do-about-it"><i class="fa fa-check"></i>What to do about it?</a></li>
<li class="chapter" data-level="" data-path="multiple-comparisons.html"><a href="multiple-comparisons.html#contrasts-examples"><i class="fa fa-check"></i>Practical examples</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>22</b> Non-independence</a></li>
<li class="chapter" data-level="23" data-path="fixed-or-random.html"><a href="fixed-or-random.html"><i class="fa fa-check"></i><b>23</b> Fixed and random effects</a></li>
<li class="chapter" data-level="24" data-path="scaling-predictors.html"><a href="scaling-predictors.html"><i class="fa fa-check"></i><b>24</b> Scaling predictor variables</a><ul>
<li class="chapter" data-level="" data-path="standardizing.html"><a href="standardizing.html"><i class="fa fa-check"></i>Standardising</a></li>
<li class="chapter" data-level="" data-path="dichotomising.html"><a href="dichotomising.html"><i class="fa fa-check"></i>Dichotomising continuous predictors (or outcomes)</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="non-scale-outcomes.html"><a href="non-scale-outcomes.html"><i class="fa fa-check"></i><b>25</b> Non-scale outcomes</a><ul>
<li class="chapter" data-level="25.1" data-path="link-functions.html"><a href="link-functions.html"><i class="fa fa-check"></i><b>25.1</b> Link functions</a><ul>
<li class="chapter" data-level="" data-path="link-functions.html"><a href="link-functions.html#logistic-link-function"><i class="fa fa-check"></i>Logistic regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="comparison-and-selection.html"><a href="comparison-and-selection.html"><i class="fa fa-check"></i><b>26</b> Building and choosing models</a><ul>
<li class="chapter" data-level="" data-path="comparison-and-selection.html"><a href="comparison-and-selection.html#like-maps-models-are-imperfect-but-useful"><i class="fa fa-check"></i>Like maps, models are imperfect but useful</a></li>
<li class="chapter" data-level="" data-path="comparison-and-selection.html"><a href="comparison-and-selection.html#over-fitting"><i class="fa fa-check"></i>Overfitting/underfitting</a></li>
<li class="chapter" data-level="" data-path="comparison-and-selection.html"><a href="comparison-and-selection.html#variable-selection"><i class="fa fa-check"></i>Choosing the ‘right variables’</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Just Enough R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="table1" class="section level2 unnumbered">
<h2>“Table 1”</h2>
<p>Table 1 in reports of clinical trials and many psychological studies reports characteristics of the sample. Typically, you will want to present information collected at baseline, split by experimental groups, including:</p>
<ul>
<li>Means, standard deviations or other descriptive statistics for continuous variables</li>
<li>Frequencies of particular responses for categorical variables</li>
<li>Some kind of inferential test for a zero-difference between the groups; this could be a t-test, an F-statistic where there are more than 2 groups, or a chi-squared test for categorical variables.</li>
</ul>
<!-- Make reference to this? https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3379950/ -->
<p>Producing this table is a pain because it requires collating multiple statistics, calculated from different functions. Many researchers resort to performing all the analyses required for each part of the table, and then copying-and-pasting results into Word.</p>
<p>It can be automated though! This example combines and extends many of the techniques we have learned using the split-apply-combine method.</p>
<p>To begin, let’s simulate some data from a fairly standard 2-arm clinical trial or psychological experiment:</p>
<p>Check our data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boring.study <span class="op">%&gt;%</span><span class="st"> </span>glimpse
Observations<span class="op">:</span><span class="st"> </span><span class="dv">280</span>
Variables<span class="op">:</span><span class="st"> </span><span class="dv">8</span>
<span class="op">$</span><span class="st"> </span>person    <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">1</span>...
<span class="op">$</span><span class="st"> </span>time      <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>...
<span class="op">$</span><span class="st"> </span>condition <span class="op">&lt;</span>fctr<span class="op">&gt;</span><span class="st"> </span>Control, Control, Control, Control, Control, Contro...
<span class="op">$</span><span class="st"> </span>yob       <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">1977</span>, <span class="dv">1983</span>, <span class="dv">1987</span>, <span class="dv">1981</span>, <span class="dv">1975</span>, <span class="dv">1981</span>, <span class="dv">1979</span>, <span class="dv">1978</span>, <span class="dv">1984</span>...
<span class="op">$</span><span class="st"> </span>WM        <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">106</span>, <span class="dv">96</span>, <span class="dv">108</span>, <span class="dv">113</span>, <span class="dv">99</span>, <span class="dv">110</span>, <span class="dv">106</span>, <span class="dv">103</span>, <span class="dv">120</span>, <span class="dv">98</span>, <span class="dv">98</span>, <span class="dv">1</span>...
<span class="op">$</span><span class="st"> </span>education <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;Primary&quot;</span>, <span class="st">&quot;Secondary&quot;</span>, <span class="st">&quot;Primary&quot;</span>, <span class="st">&quot;Graduate&quot;</span>, <span class="st">&quot;Post...</span>
<span class="st">$ ethnicity &lt;chr&gt; &quot;</span>Asian <span class="op">/</span><span class="st"> </span>Asian British<span class="st">&quot;, &quot;</span>White British<span class="st">&quot;, &quot;</span>Mixed <span class="op">/</span><span class="st"> </span>m...
<span class="op">$</span><span class="st"> </span>Attitude  <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">11</span>, <span class="dv">8</span>, <span class="dv">11</span>, <span class="dv">9</span>, <span class="dv">4</span>, <span class="dv">12</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2</span>, <span class="dv">9</span>, ...</code></pre></div>
<p>Start by making a long-form table for the categorical variables:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boring.study.categorical.melted &lt;-<span class="st"> </span>
<span class="st">  </span>table1.categorical.Ns &lt;-<span class="st"> </span>boring.study <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(condition, education, ethnicity) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">melt</span>(<span class="dt">id.var=</span><span class="st">&#39;condition&#39;</span>) </code></pre></div>
<p>Then calculate the N’s for each response/variable in each group:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(table1.categorical.Ns &lt;-<span class="st"> </span>
<span class="st">  </span>boring.study.categorical.melted <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(condition, variable, value) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">N=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">dcast</span>(variable<span class="op">+</span>value<span class="op">~</span>condition, <span class="dt">value.var=</span><span class="st">&quot;N&quot;</span>))
   variable                                       value Control
<span class="dv">1</span> education                                    Graduate      <span class="dv">32</span>
<span class="dv">2</span> education                                Postgraduate      <span class="dv">24</span>
<span class="dv">3</span> education                                     Primary      <span class="dv">24</span>
<span class="dv">4</span> education                                   Secondary      <span class="dv">32</span>
<span class="dv">5</span> education                                        <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="dv">28</span>
<span class="dv">6</span> ethnicity                       Asian <span class="op">/</span><span class="st"> </span>Asian British      <span class="dv">39</span>
<span class="dv">7</span> ethnicity Black <span class="op">/</span><span class="st"> </span>African <span class="op">/</span><span class="st"> </span>Caribbean <span class="op">/</span><span class="st"> </span>Black British      <span class="dv">28</span>
<span class="dv">8</span> ethnicity              Mixed <span class="op">/</span><span class="st"> </span>multiple ethnic groups      <span class="dv">30</span>
<span class="dv">9</span> ethnicity                               White British      <span class="dv">43</span>
  Intervention
<span class="dv">1</span>           <span class="dv">19</span>
<span class="dv">2</span>           <span class="dv">26</span>
<span class="dv">3</span>           <span class="dv">35</span>
<span class="dv">4</span>           <span class="dv">30</span>
<span class="dv">5</span>           <span class="dv">30</span>
<span class="dv">6</span>           <span class="dv">35</span>
<span class="dv">7</span>           <span class="dv">40</span>
<span class="dv">8</span>           <span class="dv">31</span>
<span class="dv">9</span>           <span class="dv">34</span></code></pre></div>
<p>Then make a second table containing Chi2 test statistics for each variable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(table1.categorical.tests &lt;-<span class="st"> </span>
<span class="st">  </span>boring.study.categorical.melted <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(variable) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">do</span>(., <span class="kw">chisq.test</span>(.<span class="op">$</span>value, .<span class="op">$</span>condition) <span class="op">%&gt;%</span><span class="st"> </span>tidy) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># this purely to facilitate matching rows up below</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">firstrowforvar=</span>T))
<span class="co"># A tibble: 2 x 6</span>
<span class="co"># Groups:   variable [2]</span>
   variable statistic   p.value parameter                     method
     <span class="op">&lt;</span>fctr<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">                     </span><span class="er">&lt;</span>fctr<span class="op">&gt;</span>
<span class="dv">1</span> education  <span class="fl">5.491517</span> <span class="fl">0.1391469</span>         <span class="dv">3</span> Pearson<span class="st">&#39;s Chi-squared test</span>
<span class="st">2 ethnicity  3.402205 0.3336691         3 Pearson&#39;</span>s Chi<span class="op">-</span>squared test
<span class="co"># ... with 1 more variables: firstrowforvar &lt;lgl&gt;</span></code></pre></div>
<p>Combine these together:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(table1.categorical.both &lt;-<span class="st"> </span>table1.categorical.Ns <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(variable) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># we join on firstrowforvar to make sure we don&#39;t duplicate the tests</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">firstrowforvar=</span><span class="kw">row_number</span>()<span class="op">==</span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(., table1.categorical.tests, <span class="dt">by=</span><span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;firstrowforvar&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># this is gross, but we don&#39;t want to repeat the variable names in our table</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">variable =</span> <span class="kw">ifelse</span>(firstrowforvar<span class="op">==</span>T, <span class="kw">as.character</span>(variable), <span class="ot">NA</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(variable, value, Control, Intervention, statistic, parameter, p.value))
<span class="co"># A tibble: 9 x 7</span>
   variable                                       value Control
      <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                       </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span>
<span class="dv">1</span> education                                    Graduate      <span class="dv">32</span>
<span class="dv">2</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                                </span>Postgraduate      <span class="dv">24</span>
<span class="dv">3</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                                     </span>Primary      <span class="dv">24</span>
<span class="dv">4</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                                   </span>Secondary      <span class="dv">32</span>
<span class="dv">5</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                                        </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="dv">28</span>
<span class="dv">6</span> ethnicity                       Asian <span class="op">/</span><span class="st"> </span>Asian British      <span class="dv">39</span>
<span class="dv">7</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st"> </span>Black <span class="op">/</span><span class="st"> </span>African <span class="op">/</span><span class="st"> </span>Caribbean <span class="op">/</span><span class="st"> </span>Black British      <span class="dv">28</span>
<span class="dv">8</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">              </span>Mixed <span class="op">/</span><span class="st"> </span>multiple ethnic groups      <span class="dv">30</span>
<span class="dv">9</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                               </span>White British      <span class="dv">43</span>
<span class="co"># ... with 4 more variables: Intervention &lt;int&gt;, statistic &lt;dbl&gt;,</span>
<span class="co">#   parameter &lt;int&gt;, p.value &lt;dbl&gt;</span></code></pre></div>
<p>Now we deal with the continuous variables. First we make a ‘long’ version of the continuous data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">continuous_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;yob&quot;</span>, <span class="st">&quot;WM&quot;</span>)
boring.continuous.melted &lt;-<span class="st"> </span>
<span class="st">  </span>boring.study <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(condition, continuous_variables) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">melt</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(variable) 
Using condition as id variables

boring.continuous.melted <span class="op">%&gt;%</span><span class="st"> </span>head
<span class="co"># A tibble: 6 x 3</span>
<span class="co"># Groups:   variable [1]</span>
  condition variable value
     <span class="op">&lt;</span>fctr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>fctr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span>
<span class="dv">1</span>   Control      yob  <span class="dv">1977</span>
<span class="dv">2</span>   Control      yob  <span class="dv">1983</span>
<span class="dv">3</span>   Control      yob  <span class="dv">1987</span>
<span class="dv">4</span>   Control      yob  <span class="dv">1981</span>
<span class="dv">5</span>   Control      yob  <span class="dv">1975</span>
<span class="dv">6</span>   Control      yob  <span class="dv">1981</span></code></pre></div>
<p>Then calculate separate tables of t-tests and means/SD’s:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(table.continuous_variables.tests &lt;-<span class="st"> </span>
<span class="st">    </span>boring.continuous.melted <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="co"># note that we pass the result of t-test to tidy, which returns a dataframe</span>
<span class="st">    </span><span class="kw">do</span>(., <span class="kw">t.test</span>(.<span class="op">$</span>value<span class="op">~</span>.<span class="op">$</span>condition) <span class="op">%&gt;%</span><span class="st"> </span>tidy) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">select</span>(variable, statistic, parameter, p.value))
<span class="co"># A tibble: 2 x 4</span>
<span class="co"># Groups:   variable [2]</span>
  variable statistic parameter   p.value
    <span class="op">&lt;</span>fctr<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span>
<span class="dv">1</span>      yob <span class="fl">0.1528165</span>  <span class="fl">276.8217</span> <span class="fl">0.8786544</span>
<span class="dv">2</span>       WM <span class="fl">0.9123421</span>  <span class="fl">275.6380</span> <span class="fl">0.3623859</span>

(table.continuous_variables.descriptives &lt;-<span class="st"> </span>
<span class="st">    </span>boring.continuous.melted <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">group_by</span>(variable, condition) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="co"># this is not needed here because we have no missing values, but if there </span>
<span class="st">    </span><span class="co"># were missing value in this dataset then mean/sd functions would fail below,</span>
<span class="st">    </span><span class="co">#  so best to remove rows without a response:</span>
<span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(value)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="co"># note, we might also want the median/IQR</span>
<span class="st">    </span><span class="kw">summarise</span>(<span class="dt">Mean=</span><span class="kw">mean</span>(value), <span class="dt">SD=</span><span class="kw">sd</span>(value)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">group_by</span>(variable, condition) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="co"># we format the mean and SD into a single column using sprintf. </span>
<span class="st">    </span><span class="co"># we don&#39;t have to do this, but it makes reshaping simpler and we probably want</span>
<span class="st">    </span><span class="co"># to round the numbers at some point, and so may as well do this now.</span>
<span class="st">    </span><span class="kw">transmute</span>(<span class="dt">MSD =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%.2f (%.2f)&quot;</span>, Mean, SD)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">dcast</span>(variable<span class="op">~</span>condition))
Adding missing grouping variables<span class="op">:</span><span class="st"> `</span><span class="dt">variable</span><span class="st">`</span>, <span class="st">`</span><span class="dt">condition</span><span class="st">`</span>
Using MSD as value column<span class="op">:</span><span class="st"> </span>use value.var to override.
  variable        Control   Intervention
<span class="dv">1</span>      yob <span class="fl">1978.98</span> (<span class="fl">5.25</span>) <span class="fl">1978.89</span> (<span class="fl">4.92</span>)
<span class="dv">2</span>       WM  <span class="fl">100.84</span> (<span class="fl">9.73</span>)  <span class="fl">99.73</span> (<span class="fl">10.68</span>)</code></pre></div>
<p>And combine them:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(table.continuous_variables.both &lt;-<span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(table.continuous_variables.descriptives, 
            table.continuous_variables.tests))
Joining, by =<span class="st"> &quot;variable&quot;</span>
  variable        Control   Intervention statistic parameter   p.value
<span class="dv">1</span>      yob <span class="fl">1978.98</span> (<span class="fl">5.25</span>) <span class="fl">1978.89</span> (<span class="fl">4.92</span>) <span class="fl">0.1528165</span>  <span class="fl">276.8217</span> <span class="fl">0.8786544</span>
<span class="dv">2</span>       WM  <span class="fl">100.84</span> (<span class="fl">9.73</span>)  <span class="fl">99.73</span> (<span class="fl">10.68</span>) <span class="fl">0.9123421</span>  <span class="fl">275.6380</span> <span class="fl">0.3623859</span></code></pre></div>
<p>Finally put the whole thing together:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(table1 &lt;-<span class="st"> </span>table1.categorical.both <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># make these variables into character format to be consistent with </span>
<span class="st">  </span><span class="co"># the Mean (SD) column for continuus variables</span>
<span class="st">  </span><span class="kw">mutate_each</span>(<span class="kw">funs</span>(format), Control, Intervention) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># note the &#39;.&#39; as the first argument, which is the input from the pipe</span>
<span class="st">  </span><span class="kw">bind_rows</span>(., 
          table.continuous_variables.both) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># prettify a few things</span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">df =</span> parameter, 
         <span class="dt">p=</span>p.value,
         <span class="st">`</span><span class="dt">Control N/Mean (SD)</span><span class="st">`</span>=<span class="st"> </span>Control,
         <span class="dt">Variable=</span>variable, 
         <span class="dt">Response=</span>value, 
         <span class="st">`</span><span class="dt">t/χ2</span><span class="st">`</span> =<span class="st"> </span>statistic)) 
<span class="st">`</span><span class="dt">mutate_each()</span><span class="st">`</span> is deprecated.
Use <span class="st">`</span><span class="dt">mutate_all()</span><span class="st">`</span>, <span class="st">`</span><span class="dt">mutate_at()</span><span class="st">`</span> or <span class="st">`</span><span class="dt">mutate_if()</span><span class="st">`</span> instead.
To map <span class="st">`</span><span class="dt">funs</span><span class="st">`</span> over a selection of variables, use <span class="st">`</span><span class="dt">mutate_at()</span><span class="st">`</span>
Warning <span class="cf">in</span> <span class="kw">bind_rows_</span>(x, .id)<span class="op">:</span><span class="st"> </span>binding character and factor vector,
coercing into character vector
<span class="co"># A tibble: 11 x 7</span>
    Variable                                    Response
       <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                       </span><span class="er">&lt;</span>chr<span class="op">&gt;</span>
<span class="st"> </span><span class="dv">1</span> education                                    Graduate
 <span class="dv">2</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                                </span>Postgraduate
 <span class="dv">3</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                                     </span>Primary
 <span class="dv">4</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                                   </span>Secondary
 <span class="dv">5</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                                        </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span>
<span class="st"> </span><span class="dv">6</span> ethnicity                       Asian <span class="op">/</span><span class="st"> </span>Asian British
 <span class="dv">7</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st"> </span>Black <span class="op">/</span><span class="st"> </span>African <span class="op">/</span><span class="st"> </span>Caribbean <span class="op">/</span><span class="st"> </span>Black British
 <span class="dv">8</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">              </span>Mixed <span class="op">/</span><span class="st"> </span>multiple ethnic groups
 <span class="dv">9</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">                               </span>White British
<span class="dv">10</span>       yob                                        <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span>
<span class="dv">11</span>        WM                                        <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span>
<span class="co"># ... with 5 more variables: `Control N/Mean (SD)` &lt;chr&gt;,</span>
<span class="co">#   Intervention &lt;chr&gt;, `t/χ2` &lt;dbl&gt;, df &lt;dbl&gt;, p &lt;dbl&gt;</span></code></pre></div>
<p>And we can print to markdown format for outputting. This is best done in a separate chunk to avoid warnings/messages appearing in the final document.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># split.tables argument needed to avoid the table wrapping</span>
<span class="st">  </span><span class="kw">pander</span>(<span class="dt">split.tables=</span><span class="ot">Inf</span>,
         <span class="dt">missing=</span><span class="st">&quot;-&quot;</span>,
         <span class="dt">justify=</span><span class="kw">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;left&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;center&quot;</span>, <span class="dv">5</span>)),
         <span class="dt">caption=</span><span class="st">&#39;Table presenting baseline differences between conditions. Categorical variables tested with Pearson χ2, continuous variables with two-sample t-test.&#39;</span>)</code></pre></div>
<table>
<caption>Table presenting baseline differences between conditions. Categorical variables tested with Pearson χ2, continuous variables with two-sample t-test.</caption>
<colgroup>
<col width="11%" />
<col width="30%" />
<col width="20%" />
<col width="15%" />
<col width="8%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Response</th>
<th align="center">Control N/Mean (SD)</th>
<th align="center">Intervention</th>
<th align="center">t/χ2</th>
<th align="center">df</th>
<th align="center">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">education</td>
<td align="left">Graduate</td>
<td align="center">32</td>
<td align="center">19</td>
<td align="center">5.492</td>
<td align="center">3</td>
<td align="center">0.1391</td>
</tr>
<tr class="even">
<td align="left">-</td>
<td align="left">Postgraduate</td>
<td align="center">24</td>
<td align="center">26</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="left">-</td>
<td align="left">Primary</td>
<td align="center">24</td>
<td align="center">35</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">-</td>
<td align="left">Secondary</td>
<td align="center">32</td>
<td align="center">30</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="left">-</td>
<td align="left">-</td>
<td align="center">28</td>
<td align="center">30</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">ethnicity</td>
<td align="left">Asian / Asian British</td>
<td align="center">39</td>
<td align="center">35</td>
<td align="center">3.402</td>
<td align="center">3</td>
<td align="center">0.3337</td>
</tr>
<tr class="odd">
<td align="left">-</td>
<td align="left">Black / African / Caribbean / Black British</td>
<td align="center">28</td>
<td align="center">40</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">-</td>
<td align="left">Mixed / multiple ethnic groups</td>
<td align="center">30</td>
<td align="center">31</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="left">-</td>
<td align="left">White British</td>
<td align="center">43</td>
<td align="center">34</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">yob</td>
<td align="left">-</td>
<td align="center">1978.98 (5.25)</td>
<td align="center">1978.89 (4.92)</td>
<td align="center">0.1528</td>
<td align="center">276.8</td>
<td align="center">0.8787</td>
</tr>
<tr class="odd">
<td align="left">WM</td>
<td align="left">-</td>
<td align="center">100.84 (9.73)</td>
<td align="center">99.73 (10.68)</td>
<td align="center">0.9123</td>
<td align="center">275.6</td>
<td align="center">0.3624</td>
</tr>
</tbody>
</table>
<p>Some exercises to work on/extensions to this code you might need:</p>
<ul>
<li>Add a new continuous variable to the simulated dataset and include it in the final table</li>
<li>Create a third experimental group and amend the code to i) include 3 columns for the N/Mean and ii) report the F-test from a one-way Anova as the test statistic.</li>
<li>Add the within-group percentage for each response to a categorical variable.</li>
</ul>

</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="code-reuse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="quirks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
